<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:viewmodels="clr-namespace:T20FichaComDB.MVVM.ViewModels.Popups"
               x:Class="T20FichaComDB.MVVM.Views.Popups.SelecaoOpcaoPoderesPopupView"
               x:DataType="viewmodels:SelecaoOpcaoPoderesPoppupViewModel"
               Color="Transparent">

    <Border Margin="25" Padding="0" Stroke="Gray"
           BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
           VerticalOptions="Center" HorizontalOptions="Center" WidthRequest="320">

        <Border.StrokeShape>
            <RoundRectangle CornerRadius="10" />
        </Border.StrokeShape>
        
        <VerticalStackLayout>
            <Label Text="{Binding PoderParaEscolha.Nome}"
                   FontSize="Large" FontAttributes="Bold" HorizontalTextAlignment="Center"
                   Padding="10"
                   BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}"/>

            <ScrollView Padding="15" MaximumHeightRequest="350">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding PromptEscolha}" FontSize="Small" FontAttributes="Italic" HorizontalTextAlignment="Center" Margin="0,0,0,10"/>

                    <Label Text="{Binding PoderParaEscolha.Descricao}" LineBreakMode="WordWrap" FontSize="Micro" Margin="0,0,0,10"/>

                    <Picker Title="Selecione uma opção"
                            ItemsSource="{Binding OpcoesDisponiveis}"
                            SelectedItem="{Binding OpcaoSelecionada}" />

                </VerticalStackLayout>
            </ScrollView>

            <Grid ColumnDefinitions="*,*" Padding="10" ColumnSpacing="10">
                <Button Grid.Column="0" Text="Cancelar" Command="{Binding CancelarEscolhaCommand}" HorizontalOptions="Fill"/>
                <Button Grid.Column="1" Text="Confirmar" Command="{Binding ConfirmarEscolhaCommand}" IsEnabled="{Binding OpcaoSelecionada, Converter={StaticResource IsNotNullConverter}}" HorizontalOptions="Fill"/>
            </Grid>
        </VerticalStackLayout>
    </Border>
</toolkit:Popup>